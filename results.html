<!doctype html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>検索結果</title>
</head>
<body>
    <h1>検索結果</h1>
    <p>地域：{{ area or "すべて" }} / 交差点：{{ intersection or "すべて" }}</p>

    {% if data %}
        <!-- 地図表示 -->
        <div>{{ map_html|safe }}</div>

        <!-- 表形式表示 -->
        <table border="1">
            <thead>
                <tr>
                    <th>交差点名</th>
                    <th>地区名</th>
                    <th>事故件数</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>{{ row['交差点名'] }}</td>
                        <td>{{ row.get('地区名', '') }}</td>
                        <td>{{ row['事故件数'] }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>検索条件に一致するデータはありません。</p>
    {% endif %}
</body>
</html>
